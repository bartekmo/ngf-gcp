imports:
  - path: vpc.jinja
    name: vpc.jinja
  - path: ngfcluster.jinja
    name: ngfcluster.jinja


resources:
  - name: vpc1
    type: vpc.jinja
    properties:
      vpcName: bam-vpc1
      ipRange: 172.17.1.0/24
      region: europe-west1
  - name: vpc2
    type: vpc.jinja
    properties:
      vpcName: bam-vpc2
      ipRange: 172.17.2.0/24
      region: europe-west1
  - name: ngfCluster
    type: ngfcluster.jinja
    properties:
      boxName: bam-hangf
      zone1: europe-west1-b
      zone2: europe-west1-d
      vpc1: $(ref.vpc1.vpcLink)
      subnet1: $(ref.vpc1.subnetLink)
      vpc2: $(ref.vpc2.vpcLink)
      subnet2: $(ref.vpc2.subnetLink)
  - name: route1-to-2
    type: compute.v1.route
    properties:
      destRange: 172.17.2.0/24
      network: $(ref.vpc1.vpcLink)
      nextHopInstance: $(ref.ngfCluster.primaryBoxLink)
  - name: route2-to-1
    type: compute.v1.route
    properties:
      destRange: 172.17.1.0/24
      network: $(ref.vpc2.vpcLink)
      nextHopInstance: $(ref.ngfCluster.primaryBoxLink)
